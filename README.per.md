
<p align="center" dir="ltr">
  <a href="/README.md">English</a> &nbsp; | &nbsp; <a href="/README.per.md">فارسی</a>
</p>


<br>



# اسکریپت LightKnightBBR  v1.5.3 - برای تنظیم مطمئن تر:

 - &#x200F;**الگوریتم‌های کنترل ازدحام:** <CODE>BBR</CODE>، <CODE>HYBLA</CODE>، <CODE>CUBIC</CODE>
 - &#x200F;**الگوریتم‌های Qdisc:**&#x200F; <CODE>FQ</CODE>، <CODE>FQ_CODEL</CODE>، <CODE>CAKE</CODE>
 - &#x200F;**برای بهینه سازی: UDP، TCP(توسط الگوریتم های Qdisc) و غیره...**&#x200F;
  - **با قابلیت های بیشتر : چندین روش تست سرعت ،  پشتیبان گیری/بازیابی تنظیمات ، و غیره...**


<br>

----------------------------------------------------------------


<div align="right">
  <details>
    <summary><strong>تغییرات</strong></summary>


<br>**V 1.5.2 :**

- از این پس تغییرات را در بخش release مشاهده کنید.

**V 1.5 :**
- تغییرات ظاهری - پیام های خروجی 
- افزودن برخی پارامترهای بهینه‌سازی برای کاهش بار شبکه بدون کاهش امنیت استاندارد، مناسب برای طیف گسترده‌ای از کاربردها
- بهبود اسکریپت و ارتقا عملکرد بهینه سازها
- بهینه سازی Speedtest Ookla

**V 1.4 :**
- **موارد افزوده شده :**
- Tcp Congestion Control جدید : Hybla و Cubic
- گزینه Status : الگوریتم Qdisk و Congestion Control فعلی سیستم عامل را نمایش میدهد . (برای نمایش صحیح ضرویست که پس از هر تغییرات و کانفیگ و.. سیستم را ریبوت کنید و مجدد بررسی کنید)
- **موارد تغییر یافته :**
- دسته بندی منو ها تغییر کرد :
- گزینه ‏BBR + Cake <  BBR Base < CakePlus 
- هرکدام از Congestion Control ها امکان فعال سازی با سه نوع FQ_CODE , FQ , CAKE : Qdisk را خواهد داشت .
- تغییرات ظاهری
- بهبود عملکرد

**V 1.3 :**
- بهینه سازی در کانفیگ الگوریتم ها .
- الگوریتم ها فقط در اینترفیس های اصلی اعمال خواهند شد تا از پردازش بیشتر و بهینه سازی معکوس جلوگیری شود .
- بهینه سازی : رفع مشکل تشخیص و .. در برخی سیستم عامل ها .
- عملکرد گزینه بازیابی بهینه شد . حتما قبل از اعمال تنظیمات جدید بازیابی کرده و سپس ریبوت کنید .


**V 1.2 :**
- الگوریتم Cake به عنوان الگوریتم پیشرفته Qos در کنار BBR به صورت ترکیبی اضافه شد.
**از Cake به عنوان الگوریتم Qos حرفه ای در ‌لایه صف‌بندی (Qdisc) استفاده خواهد شد و صف‌بندی ترافیک را به بهترین شکل ممکن مدیریت می‌کند و باعث می‌شود تا نوسانات جیتر و تأخیر به حداقل برسد
و از  BBR در لایه کنترل تراکم به عنوان Tcp Congestion Control استفاده خواهد شد و  بهینه‌ترین سرعت ارسال داده را بدون ایجاد ازدحام در ترافیک TCP فراهم می‌کند .**
-  در هر دو حالت نصب از فایل اصلی بکاپ گرفته میشود.
-  بهبود هایی در گزینه بازیابی تنظیمات .
- بهبود هایی در اعمال ecn 
- بهبود هایی در اعمال الگوریتم 
- الگوریتم Qos - qdisk در اینترفیس مختلف مانند زمانی که اینترفیس آیپی 6 جدا باشد نیز اعمال خواهد شد .
- بهبود هایی در نصب بسته ها 
- بهبود هایی در اجرای تست سرعت و...


**V 1.1 :**
- بهینه سازی شده
- چک کردن سازگاری سیستم‌عامل و کرنل
- ایجاد تغییراتی برای توزیع های مدرن و متد جایگزین برای سیستم‌های قدیمی‌تر در پایتون
- بررسی و نصب بسته‌های مورد نیاز 
- فعال‌سازی ECN (Explicit Congestion Notification)  
- الگوریتم صف‌بندی (fq یا fq_codel) برای اینترفیس شبکه و qdisk در سیستم عامل و کارت شبکه هایی که پشتیبانی نمیکنند یا به دلایلی مثل قدیمی بودن کارت شبکه و... به طور کامل تنظیم نمیشوند با بررسی خودکار توسط اسکریپت تنظیم خواهد شد = **بهینه سازی بیشتر**
- همچنین پیام‌های بازخورد بهبود یافته‌اند تا کاربران بهتر از وضعیت اجرای مراحل مطلع شوند.
  </details>
</div>

------------------------------------------------------------------------------------------

<div align="right">
  <details>
    <summary><strong>توضیحات</strong></summary>


**پروژه ای برای پیکربندی BBR , HYBLA , CUBIC با سه الگوریتم FQ , FQ_CODEL , CAKE و اجرای SpeedTest**

**BBR,HYBLA,CUBIC :**
- پیکربندی کامل 
- پشتیبان گیری و بازیابی تنظیمات اعمال شده 

**Speedtest :**


- 2 روش برای تست سرعت به صورت Bench.sh
- تست سرعت بین 2 سرور با Iperf3
- تست سرعت با *Speedtest By ookla* با امکان تعیین سرور

![image](https://github.com/kalilovers/LightKnightBBR/assets/30160766/d14d4917-82d3-4006-9cad-082b6aeaa40b)
  </details>
</div>

-----------------------

<div align="right">
  <details>
    <summary><strong>نکات و آموزش</strong></summary>
    
- **پیشنهاد من  حداقل نسخه اوبونتو 20.04 به بالا (22 و بالاتر) و دبیان 10 به بالا(حداقل 11 یا 12 و بالاتر) (چون در کرنل های جدیدتر از bbrv2 استفاده میشود) بخصوص برای vpn ، بازی ، تماس و... است**
- **سیستم عامل های پشتیبانی شده » اوبونتو نسخه 18 به بالا - دبیان 10 به بالا**
- حتما در کاربر root و یا با دستور **sudo** اجرا شود
- برای اعمال تغییرات **reboot** لازم است
- توصیه میشود در تانلینگ و سرور های تانل شده , از یک کانفیگ مشابه استفاده کنید تا عملکرد بهینه تر باشد و الگوریتم های هردو یا .. سرور با یکدیگر هماهنگ باشند . برای مثال در صورتی که دو سرور دارید که بهم تانل شده اند , الگوریتم مورد نظر خود مثلا BBR + FQ_CODEL را در هردو سرور فعال کنید ( در صورتی که در یکی از سرور ها اعمال نکنید در واقع آن سرور از تنظیمات و الگوریتم پیشفرض که متفاوت از سرور بهینه شده است استفاده خواهد کرد و باعث جلوگیری از افزایش کامل راندمان تانل و ... خواهد شد) .
  </details>
</div>


------------------------------------------------------------------------------------------
اگر به ویژگی های دیگری نیاز دارید یا مشکلی وجود دارد، ممنون میشوم که در قسمت issue اطلاع دهید
------------

<br>**نصب :**

```
bash <(curl -fsSL https://raw.githubusercontent.com/kalilovers/LightKnightBBR/main/install.sh)
```

**اجرا :**

```
lbbr
```

**حذف :**

```
lbbr --uninstall
```


<br><br>


**❤️ با تشکر ویژه از :**
 - https://github.com/Azumi67
 - https://t.me/OPIran_official

